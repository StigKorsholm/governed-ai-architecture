# ADR-011: Local LLM for Production, Cloud Models for Dev/Test Only

> **Status:** ✅ Accepted  
> **Date:** 2025-12-22  
> **Triggered By:** ADR-000 (security/compliance consequence)  
> **Triggers:** —

---

## Summary

* **Decision:** Use locally-hosted LLM (Qwen) for all production runs. Cloud models (Gemini) are permitted only for development and testing with non-production data.
* **Chosen approach:** Environment-based model selection, strict data classification, local inference infrastructure.
* **Why:** Banking data residency and compliance requirements prohibit sending production schemas and business logic to external cloud services.
* **Scope:** This ADR covers model deployment strategy. Specific model versions are implementation details.

---

## Context

The pipeline processes sensitive information:
- Database schemas (table names, column names)
- Business logic hints (naming conventions, stored procedures)
- Organizational structure (capability names)

While not PII, this data is competitively sensitive, subject to data residency requirements, and potentially security-relevant.

---

## Decision

We will use **local LLM for production**:

### Model allocation

| Environment | Model | Location | Data Allowed |
|-------------|-------|----------|--------------|
| Development | Gemini | Cloud | Synthetic only |
| Testing | Gemini/Qwen | Cloud/Local | Synthetic only |
| **Production** | **Qwen** | **Local** | **Production data** |

### Production rules (non-negotiable)

- ✅ All production runs use locally-hosted Qwen
- ❌ No production data sent to cloud APIs
- ❌ No exceptions without security review

---

## Consequences

### Positive Consequences

- Better compliance posture
- No cloud egress for sensitive data
- Full control over model behavior

### Negative Consequences

- Local model quality may be lower
- Hardware requirements for inference

---

## References

- **Related ADRs:** ADR-000 (compliance), ADR-012 (data classification)
